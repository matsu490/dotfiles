%	#RSS vs SD of #Spike of SA vs SD of #Spike of EA

clear all
close all
fclose('all');

strEnv  =  {'stim100' 'addstdp' 'mltstdp' 'stim050' 'stim060' 'stim070' 'stim080' 'stim090'};
strData =  {'50[Hz]' '100[Hz]' '200[Hz]' '0.3[-]' '0.5[-]' '0.7[-]'};
strTest =  {'1,000[msec](same)' '2,000[msec](same)' '4,000[msec](same)'...
			'1,000[msec](diff)' '2,000[msec](diff)' '4,000[msec](diff)'...
			'wo learning' 'wo input mod' ' wo learning & input mod'};
strCmp  =  {'02' '04' '06' '08' '10' '12' '14' '16' '18' '20'};
strTrl  =  {'01' '02' '03' '04' '05' '06' '07' '08' '09' '10'};

pltEnv  = 1:1;	%Simulation environment
pltData = 1:6;	%Data number
pltTest = 1:9;  %Data-test number
pltCmp  = 5:5;  %Sequence compression ratio
pltTrl  = 1:10; %After learning trial number

EXC_NUM = 400;
tSA = [500 1000];
tEA = [1000 1500];

nSeqMean = ones(length(pltEnv),length(pltData),length(pltTest));
nSeqStd = ones(length(pltEnv),length(pltData),length(pltTest));

data_dir = '/Users/matsu/Research/LogSTDP';
working_dir = '/Users/matsu/Documents/MATLAB/LogSTDP';
for i = pltEnv
	for j = pltData
		for k = pltTest
			for l = pltCmp
				for m = pltTrl
                    load_dir = sprintf('%s/DataBase/%s/data%d/test0%d/cmpr%s/trial%s',working_dir,strEnv{i},j,k,strCmp{l},strTrl{m});
					load(sprintf('%s/nSeq.mat',load_dir));
                    load_dir = sprintf('%s/mod-code-longstim02-%s/data%d/data-test0%d',data_dir,strEnv{i},j,k);
                    espk = load(sprintf('%s/espk.%s',load_dir,strTrl{m}));

					nSeq(1,m) = seqstat;
					nSeqMean(i,j,k) = mean(nSeq);
					nSeqStd(i,j,k) = std(nSeq);
					clear seqstat

					tmpSpkSA = espk(find(tSA(1)<=espk(:,1) & espk(:,1)<=tSA(2)),:);
					tmpSpkEA = espk(find(tEA(1)<=espk(:,1) & espk(:,1)<=tEA(2)),:);
					for n = 0:EXC_NUM-1
						nSpkSA(n+1) = sum(tmpSpkSA(:,2)==n);
						nSpkEA(n+1) = sum(tmpSpkEA(:,2)==n);
					end
					tmpstdSpkSA(m) = std(nSpkSA);
					tmpstdSpkEA(m) = std(nSpkEA);
				end % for m : after learning trial

				stdSpkSAMean(i,j,k) = mean(tmpstdSpkSA);
				stdSpkSAStd(i,j,k) = std(tmpstdSpkSA);
				stdSpkEAMean(i,j,k) = mean(tmpstdSpkEA);
				stdSpkEAStd(i,j,k) = std(tmpstdSpkEA);
			end %for l : compression ratio

			fprintf('For loop have finished until test0%d\n',k);
		end %for k : data-test

		fprintf('For loop have finished until data%d\n',j);
	end %for j : data

	fprintf('For loop have finished until simu env%d\n',i);
end	%for i : simulation environment

tglSave = 0;
dirSave = '../SavedFigures/plotter014';
for i = pltEnv
	for j = pltData
		figure
		subplot(1,3,1)
		bar(squeeze(nSeqMean(i,j,pltTest)));hold on
		errorbar(nSeqMean(i,j,pltTest),nSeqStd(i,j,pltTest));hold on
		set(gca,'xTickLabel',strTest(pltTest))
		title(['#RSS ' strEnv{i} ' ' strData{j}])

		subplot(1,3,2)
		bar(squeeze(stdSpkSAMean(i,j,pltTest)));hold on
		errorbar(stdSpkSAMean(i,j,pltTest),stdSpkSAStd(i,j,pltTest));hold on
		set(gca,'xTickLabel',strTest(pltTest))
		title(['SD of #Spike of SA ' strEnv{i} ' ' strData{j}])

		subplot(1,3,3)
		bar(squeeze(stdSpkEAMean(i,j,pltTest)));hold on
		errorbar(stdSpkEAMean(i,j,pltTest),stdSpkEAStd(i,j,pltTest));hold on
		set(gca,'xTickLabel',strTest(pltTest))
		title(['SD of #Spike of EA ' strEnv{i} ' ' strData{j}])

		if tglSave
			filename = sprintf('%s_%s',strEnv{i},strrep(strData{j},'.',','));
			filepath = [dirSave '/' filename];
			saveas(gcf,filepath,'fig')
			saveas(gcf,filepath,'png')
		end
	end
end
